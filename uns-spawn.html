<script type="text/html" data-template-name="uns-spawn">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-redisConfig"><i class="fa fa-server"></i> Redis Config</label>
        <input type="text" id="node-input-redisConfig">
    </div>

    <div class="form-row">
        <label for="node-input-uns"><i class="fa fa-link"></i> Unified Name Space</label>
        <input type="text" id="node-input-uns" placeholder="example: sensor/temp1">
    </div>

    <div class="form-row">
        <label for="node-input-valueSource"><i class="fa fa-code"></i> Value Source</label>
        <input type="text" id="node-input-valueSource" style="width:70%">
        <input type="hidden" id="node-input-valueSourceType">
    </div>

    <div class="form-row">
        <label for="node-input-description"><i class="fa fa-info-circle"></i> Description</label>
        <input type="text" id="node-input-description">
    </div>

    <div class="form-row">
        <label for="node-input-unit"><i class="fa fa-balance-scale"></i> Unit</label>
        <input type="text" id="node-input-unit">
    </div>

    <div class="form-row">
        <label for="node-input-enableHistorian"><i class="fa fa-history"></i> Enable Historian</label>
        <input type="checkbox" id="node-input-enableHistorian">
    </div>

    <div class="form-row">
        <label for="node-input-timestampSource"><i class="fa fa-clock-o"></i> Timestamp Source</label>
        <input type="text" id="node-input-timestampSource" style="width:70%">
        <input type="hidden" id="node-input-timestampSourceType">
    </div>

    <div class="form-row">
        <label for="node-input-ttl"><i class="fa fa-hourglass"></i> Time to Live (sec)</label>
        <input type="number" id="node-input-ttl" min="0" value="0">
    </div>

    <div class="form-row">
        <label for="node-input-enableStatus"><i class="fa fa-toggle-on"></i> Enable Status</label>
        <input type="checkbox" id="node-input-enableStatus" checked>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('uns-spawn', {
        category: 'database',
        color: '#3FADB5',
        defaults: {
            name: { value: "" },
            redisConfig: { value:"", type: "uns-redis-config", required: true },
            uns: { value:"", required: true },
            valueSource: { value:"payload" },
            valueSourceType: { value:"msg" },
            description: { value:"" },
            unit: { value:"" },
            enableHistorian: { value:false },
            timestampSource: { value:"" },
            timestampSourceType: { value:"msg" },
            ttl: { value:0 },
            enableStatus: { value:true }
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-database",
        label: function() {
            return this.name || ("uns-spawn: " + this.uns);
        },
        oneditprepare: function() {
            $("#node-input-valueSource").typedInput({
                typeField: "#node-input-valueSourceType",
                types: ["msg","flow","global"],
                default: "msg"
            });
            $("#node-input-timestampSource").typedInput({
                typeField: "#node-input-timestampSourceType",
                types: ["msg","flow","global"],
                default: "msg"
            });
        }
    });
</script>
